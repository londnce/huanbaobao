{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"../utils/request\";\nexport default {\n  name: \"Add\",\n  data() {\n    return {\n      ruleForm: {\n        name: '',\n        image: '',\n        price: '',\n        num: '',\n        categoryleveloneId: '',\n        categoryleveltwoId: '',\n        categorylevelthreeId: ''\n      },\n      rules: {\n        title: [{\n          required: true,\n          message: '商品名称不能为空',\n          trigger: 'change'\n        }],\n        categoryleveloneId: [{\n          required: true,\n          message: '一级分类不能为空',\n          trigger: 'blur'\n        }],\n        categoryleveltwoId: [{\n          required: true,\n          message: '二级分类不能为空',\n          trigger: 'blur'\n        }],\n        categorylevelthreeId: [{\n          required: true,\n          message: '三级分类不能为空',\n          trigger: 'blur'\n        }]\n      },\n      options1: '',\n      options2: '',\n      options3: ''\n    };\n  },\n  created() {\n    let _this = this;\n    request.get('/admin/productCategory/init').then(function (resp) {\n      _this.options1 = resp.data;\n    });\n  },\n  methods: {\n    change1() {\n      let _this = this;\n      request.get('/admin/productCategory/children/2/' + this.ruleForm.categoryleveloneId).then(function (resp) {\n        _this.options2 = resp.data;\n        _this.ruleForm.categoryleveltwoId = '';\n        _this.options3 = '';\n        _this.ruleForm.categorylevelthreeId = '';\n      });\n    },\n    change2() {\n      let _this = this;\n      request.get('/admin/productCategory/children/3/' + this.ruleForm.categoryleveltwoId).then(function (resp) {\n        _this.options3 = resp.data;\n        _this.ruleForm.categorylevelthreeId = '';\n      });\n    },\n    submitForm(formName) {\n      let _this = this;\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          request.post('/admin/product/save', _this.ruleForm).then(function (resp) {\n            if (resp.data) {\n              _this.$alert('【' + _this.ruleForm.name + '】添加成功', '', {\n                confirmButtonText: '确定',\n                callback: action => {\n                  _this.$router.push('/productManage');\n                }\n              });\n            }\n          });\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};","map":{"version":3,"mappings":";AA6DA;AAEA;EACAA;EACAC;IACA;MACAC;QACAF;QACAG;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAC,QACA;UAAAC;UAAAC;UAAAC;QAAA,EACA;QACAP,qBACA;UAAAK;UAAAC;UAAAC;QAAA,EACA;QACAN,qBACA;UAAAI;UAAAC;UAAAC;QAAA,EACA;QACAL,uBACA;UAAAG;UAAAC;UAAAC;QAAA;MAEA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;MACAH;QACAC;QACAA;QACAA;QACAA;MACA;IACA;IACAG;MACA;MACAJ;QACAC;QACAA;MACA;IACA;IACAI;MACA;MACA;QACA;UACAL;YACA;cACAC;gBACAK;gBACAC;kBACAN;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAO;MACA;IACA;EACA;AACA","names":["name","data","ruleForm","image","price","num","categoryleveloneId","categoryleveltwoId","categorylevelthreeId","rules","title","required","message","trigger","options1","options2","options3","created","request","_this","methods","change1","change2","submitForm","confirmButtonText","callback","resetForm"],"sourceRoot":"src/views","sources":["AddPro.vue"],"sourcesContent":["<template>\r\n    <div style=\"margin-top: 60px;margin-left:80px;width: 600px\" >\r\n        <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n            <el-form-item label=\"商品名称\" prop=\"title\">\r\n                <el-input v-model=\"ruleForm.title\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品图片\" prop=\"image\">\r\n                <el-input v-model=\"ruleForm.image\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item\r\n                    label=\"商品价格\"\r\n                    prop=\"price\"\r\n                    :rules=\"[{ required: true, message: '价格不能为空'},\r\n                             { type: 'number', message: '价格必须为数字值'}]\"\r\n            >\r\n                <el-input v-model.number=\"ruleForm.price\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item\r\n                    label=\"商品库存\"\r\n                    prop=\"num\"\r\n                    :rules=\"[{ required: true, message: '库存不能为空'},\r\n                             { type: 'number', message: '库存必须为数字值'}]\"\r\n            >\r\n                <el-input v-model.number=\"ruleForm.stock\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"一级分类\" prop=\"categoryleveloneId\">\r\n                <el-select style=\"width:500px;\" v-model=\"ruleForm.categoryleveloneId\" @change=\"change1\" placeholder=\"请选择\">\r\n                    <el-option\r\n                            v-for=\"item in options1\"\r\n                            :label=\"item.name\"\r\n                            :value=\"item.id\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"二级分类\" prop=\"categoryleveltwoId\">\r\n                <el-select style=\"width:500px;\" v-model=\"ruleForm.categoryleveltwoId\" @change=\"change2\" placeholder=\"请选择\">\r\n                    <el-option\r\n                            v-for=\"item in options2\"\r\n                            :label=\"item.name\"\r\n                            :value=\"item.id\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"三级分类\" prop=\"categorylevelthreeId\">\r\n                <el-select style=\"width:500px;\" v-model=\"ruleForm.categorylevelthreeId\" placeholder=\"请选择\">\r\n                    <el-option\r\n                            v-for=\"item in options3\"\r\n                            :label=\"item.name\"\r\n                            :value=\"item.id\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即创建</el-button>\r\n                <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import request from \"../utils/request\";\r\n\r\n    export default {\r\n        name: \"Add\",\r\n        data() {\r\n            return {\r\n                ruleForm: {\r\n                    name: '',\r\n                    image: '',\r\n                    price: '',\r\n                    num: '',\r\n                    categoryleveloneId: '',\r\n                    categoryleveltwoId: '',\r\n                    categorylevelthreeId: ''\r\n                },\r\n                rules: {\r\n                    title: [\r\n                        { required: true, message: '商品名称不能为空', trigger: 'change' }\r\n                    ],\r\n                    categoryleveloneId: [\r\n                        { required: true, message: '一级分类不能为空', trigger: 'blur' }\r\n                    ],\r\n                    categoryleveltwoId: [\r\n                        { required: true, message: '二级分类不能为空', trigger: 'blur' }\r\n                    ],\r\n                    categorylevelthreeId: [\r\n                        { required: true, message: '三级分类不能为空', trigger: 'blur' }\r\n                    ]\r\n                },\r\n                options1: '',\r\n                options2: '',\r\n                options3: ''\r\n            };\r\n        },\r\n        created() {\r\n            let _this = this\r\n            request.get('/admin/productCategory/init').then(function (resp) {\r\n                _this.options1 = resp.data\r\n            })\r\n        },\r\n        methods: {\r\n            change1(){\r\n                let _this = this\r\n                request.get('/admin/productCategory/children/2/'+this.ruleForm.categoryleveloneId).then(function (resp) {\r\n                    _this.options2 = resp.data\r\n                    _this.ruleForm.categoryleveltwoId = ''\r\n                    _this.options3 = ''\r\n                    _this.ruleForm.categorylevelthreeId = ''\r\n                })\r\n            },\r\n            change2(){\r\n                let _this = this\r\n                request.get('/admin/productCategory/children/3/'+this.ruleForm.categoryleveltwoId).then(function (resp) {\r\n                    _this.options3 = resp.data\r\n                    _this.ruleForm.categorylevelthreeId = ''\r\n                })\r\n            },\r\n            submitForm(formName) {\r\n                let _this = this\r\n                this.$refs[formName].validate((valid) => {\r\n                    if (valid) {\r\n                        request.post('/admin/product/save',_this.ruleForm).then(function (resp) {\r\n                            if(resp.data){\r\n                                _this.$alert('【'+_this.ruleForm.name+'】添加成功', '', {\r\n                                    confirmButtonText: '确定',\r\n                                    callback: action => {\r\n                                        _this.$router.push('/productManage')\r\n                                    }\r\n                                });\r\n                            }\r\n                        })\r\n                    }\r\n                });\r\n            },\r\n            resetForm(formName) {\r\n                this.$refs[formName].resetFields();\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}