{"ast":null,"code":"export default {\n  name: \"EditPw\",\n  data() {\n    return {\n      form: {},\n      admin: localStorage.getItem(\"admin\") ? JSON.parse(localStorage.getItem(\"admin\")) : {},\n      rules: {\n        adminPw: [{\n          required: true,\n          message: '请输入原密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          message: '长度不少于3位',\n          trigger: 'blur'\n        }],\n        newPw: [{\n          required: true,\n          message: '请输入新密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          message: '长度不少于3位',\n          trigger: 'blur'\n        }],\n        confirmPassword: [{\n          required: true,\n          message: '请输入密码',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          message: '长度不少于3位',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  created() {\n    this.form.adminName = this.admin.adminName;\n  },\n  methods: {\n    edit() {\n      this.$refs.pass.validate(valid => {\n        if (valid) {\n          if (this.form.newPw !== this.form.confirmPassword) {\n            this.$message.error(\"2次输入的新密码不相同\");\n            return false;\n          }\n          this.request.post(\"/admin/editPw\", this.form).then(res => {\n            if (res.status === 200) {\n              this.$message.success(\"修改成功\");\n              this.$store.commit(\"logout\");\n            } else {\n              this.$message.error(\"修改失败\");\n            }\n          });\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"AAqBA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC,UACA;UAAAC;UAAAC;UAAAC;QAAA,GACA;UAAAC;UAAAF;UAAAC;QAAA,EACA;QACAE,QACA;UAAAJ;UAAAC;UAAAC;QAAA,GACA;UAAAC;UAAAF;UAAAC;QAAA,EACA;QACAG,kBACA;UAAAL;UAAAC;UAAAC;QAAA,GACA;UAAAC;UAAAF;UAAAC;QAAA;MAEA;IACA;EACA;EACAI;IACA;EACA;EACAC;IACAC;MACA;QACA;UACA;YACA;YACA;UACA;UACA;YACA;cACA;cACA;YACA;cACA;YACA;UACA;QACA;MACA;IACA;EACA;AACA","names":["name","data","form","admin","rules","adminPw","required","message","trigger","min","newPw","confirmPassword","created","methods","edit"],"sourceRoot":"src/views","sources":["EditPw.vue"],"sourcesContent":["<template>\r\n    <el-card style=\"width: 500px;\">\r\n        <el-form label-width=\"120px\" size=\"small\" :model=\"form\" :rules=\"rules\" ref=\"pass\">\r\n\r\n            <el-form-item label=\"原密码\" prop=\"adminPw\">\r\n                <el-input v-model=\"form.adminPw\" autocomplete=\"off\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"新密码\" prop=\"newPw\">\r\n                <el-input v-model=\"form.newPw\" autocomplete=\"off\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"确认新密码\" prop=\"confirmPassword\">\r\n                <el-input v-model=\"form.confirmPassword\" autocomplete=\"off\" show-password></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"edit\">确 定</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </el-card>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"EditPw\",\r\n        data() {\r\n            return {\r\n                form: {},\r\n                admin: localStorage.getItem(\"admin\") ? JSON.parse(localStorage.getItem(\"admin\")) : {},\r\n                rules: {\r\n                    adminPw: [\r\n                        { required: true, message: '请输入原密码', trigger: 'blur' },\r\n                        { min: 3, message: '长度不少于3位', trigger: 'blur' }\r\n                    ],\r\n                    newPw: [\r\n                        { required: true, message: '请输入新密码', trigger: 'blur' },\r\n                        { min: 3, message: '长度不少于3位', trigger: 'blur' }\r\n                    ],\r\n                    confirmPassword: [\r\n                        { required: true, message: '请输入密码', trigger: 'blur' },\r\n                        { min: 3, message: '长度不少于3位', trigger: 'blur' }\r\n                    ],\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            this.form.adminName = this.admin.adminName\r\n        },\r\n        methods: {\r\n            edit() {\r\n                this.$refs.pass.validate((valid) => {\r\n                    if (valid) {\r\n                        if (this.form.newPw !== this.form.confirmPassword) {\r\n                            this.$message.error(\"2次输入的新密码不相同\")\r\n                            return false\r\n                        }\r\n                        this.request.post(\"/admin/editPw\", this.form).then(res => {\r\n                            if (res.status === 200) {\r\n                                this.$message.success(\"修改成功\")\r\n                                this.$store.commit(\"logout\")\r\n                            } else {\r\n                                this.$message.error(\"修改失败\")\r\n                            }\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .avatar-uploader {\r\n        text-align: center;\r\n        padding-bottom: 10px;\r\n    }\r\n    .avatar-uploader .el-upload {\r\n        border: 1px dashed #d9d9d9;\r\n        border-radius: 6px;\r\n        cursor: pointer;\r\n        position: relative;\r\n        overflow: hidden;\r\n    }\r\n    .avatar-uploader .el-upload:hover {\r\n        border-color: #409EFF;\r\n    }\r\n    .avatar-uploader-icon {\r\n        font-size: 28px;\r\n        color: #8c939d;\r\n        width: 138px;\r\n        height: 138px;\r\n        line-height: 138px;\r\n        text-align: center;\r\n    }\r\n    .avatar {\r\n        width: 138px;\r\n        height: 138px;\r\n        display: block;\r\n    }\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}