{"ast":null,"code":"import request from \"../utils/request\";\nexport default {\n  name: \"AddPro\",\n  data() {\n    return {\n      form: [],\n      admin: localStorage.getItem(\"admin\") ? JSON.parse(localStorage.getItem(\"admin\")) : {},\n      rules: {\n        title: [{\n          required: true,\n          message: '请输入商品名称',\n          trigger: 'blur'\n        }],\n        price: [{\n          required: true,\n          message: '请输入商品价格',\n          trigger: 'blur'\n        }],\n        num: [{\n          required: true,\n          message: '请输入商品库存',\n          trigger: 'blur'\n        }],\n        status: [{\n          required: true,\n          message: '请输入商品状态',\n          trigger: 'blur'\n        }]\n      },\n      values: [],\n      options: [],\n      defaultProp: {\n        label: 'name',\n        value: 'id',\n        children: 'children'\n      }\n    };\n  },\n  created() {\n    this.getAdmin().then(res => {\n      console.log(res);\n      this.form = res;\n    });\n    //获取所有分类数据\n    this.handleChange();\n  },\n  methods: {\n    handleChange() {\n      //级联选择器绑定的方法\n      request.get('/admin/category/list/tree').then(res => {\n        //将获取到的数据赋值给values\n        this.options = this.getTreeData(res.data);\n      });\n    },\n    // 递归方法\n    getTreeData(data) {\n      // 循环遍历json数据\n      for (var i = 0; i < data.length; i++) {\n        if (data[i].children.length < 1) {\n          // children若为空数组，则将children设为undefined\n          data[i].children = undefined;\n        } else {\n          // children若不为空数组，则继续 递归调用 本方法\n          this.getTreeData(data[i].children);\n        }\n      }\n      return data;\n    },\n    async getAdmin() {\n      return (await this.request.get(\"/admin/\" + this.admin.adminName)).data;\n    },\n    save() {},\n    reset() {\n      this.$router;\n    }\n  }\n};","map":{"version":3,"mappings":"AAkDA;AAEA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC,QACA;UAAAC;UAAAC;UAAAC;QAAA,EACA;QACAC,QACA;UAAAH;UAAAC;UAAAC;QAAA,EACA;QACAE,MACA;UAAAJ;UAAAC;UAAAC;QAAA,EACA;QACAG,SACA;UAAAL;UAAAC;UAAAC;QAAA;MAEA;MACAI;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACA;MACAC;MACA;IACA;IACA;IACA;EACA;EACAC;IACAC;MAAA;MACAC,yCACAC;QACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;UACA;UACAvB;QACA;UACA;UACA;QACA;MACA;MACA;IACA;IACA;MACA;IACA;IACAwB,QAEA;IACAC;MACA;IACA;EACA;AACA","names":["name","data","form","admin","rules","title","required","message","trigger","price","num","status","values","options","defaultProp","label","value","children","created","console","methods","handleChange","request","then","getTreeData","save","reset"],"sourceRoot":"src/views","sources":["AddPro.vue"],"sourcesContent":["<template>\r\n   <div align=\"center\">\r\n       <div style=\"margin-bottom: 10px\">添加商品</div>\r\n           <el-card style=\"width: 500px;\">\r\n               <span>商品信息</span>\r\n               <div style=\"margin-top: 10px\">\r\n                   <el-form label-width=\"100px\" :model=\"form\" :rules=\"rules\" ref=\"ruleForm\" size=\"small\">\r\n                       <el-form-item prop=\"categoryName\" label=\"商品分类\">\r\n                           <el-cascader\r\n                                   v-model=\"values\"\r\n                                   :options=\"options\"\r\n                                   :props=\"defaultProp\"\r\n                                   @change=\"handleChange\"\r\n                                   :show-all-levels=\"false\"></el-cascader>\r\n                       </el-form-item>\r\n                       <el-form-item prop=\"title\" label=\"商品名称\">\r\n                           <el-input v-model=\"form.title\" autocomplete=\"off\"></el-input>\r\n                       </el-form-item>\r\n                       <el-form-item prop=\"price\" label=\"商品价格\">\r\n                           <el-input v-model=\"form.price\" autocomplete=\"off\"></el-input>\r\n                       </el-form-item>\r\n                       <el-form-item prop=\"image\" label=\"商品图片\">\r\n                           <el-upload action=\"/file/upload\" ref=\"image\" :on-success=\"handleImgUploadSuccess\">\r\n                               <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n                           </el-upload>\r\n                       </el-form-item>\r\n                       <el-form-item prop=\"itemType\" label=\"商品系列\">\r\n                           <el-input v-model=\"form.itemType\" autocomplete=\"off\"></el-input>\r\n                       </el-form-item>\r\n                       <el-form-item prop=\"num\" label=\"商品库存\">\r\n                           <el-input v-model=\"form.num\" autocomplete=\"off\"></el-input>\r\n                       </el-form-item>\r\n                       <el-form-item prop=\"status\" label=\"状态\">\r\n                           <el-input v-model=\"form.status\" autocomplete=\"off\"></el-input>\r\n                       </el-form-item>\r\n                       <el-form-item label=\"修改人\">\r\n                           <el-input v-model=\"form.adminName\" disabled autocomplete=\"off\"></el-input>\r\n                       </el-form-item>\r\n                       <el-form-item>\r\n                           <el-button type=\"primary\" @click=\"save\">立即创建</el-button>\r\n                           <el-button type=\"warning\" @click=\"reset\">重置</el-button>\r\n                       </el-form-item>\r\n                   </el-form>\r\n               </div>\r\n           </el-card>\r\n   </div>\r\n\r\n</template>\r\n\r\n<script>\r\n    import request from \"../utils/request\";\r\n\r\n    export default {\r\n        name: \"AddPro\",\r\n        data(){\r\n            return {\r\n                form:[],\r\n                admin: localStorage.getItem(\"admin\") ? JSON.parse(localStorage.getItem(\"admin\")) : {},\r\n                rules: {\r\n                    title: [\r\n                        { required: true, message: '请输入商品名称', trigger: 'blur'}\r\n                    ],\r\n                    price: [\r\n                        { required: true, message: '请输入商品价格', trigger: 'blur'}\r\n                    ],\r\n                    num: [\r\n                        { required: true, message: '请输入商品库存', trigger: 'blur'}\r\n                    ],\r\n                    status: [\r\n                        { required: true, message: '请输入商品状态', trigger: 'blur'}\r\n                    ],\r\n                },\r\n                values: [],\r\n                options: [],\r\n                defaultProp:{\r\n                    label: 'name',\r\n                    value: 'id',\r\n                    children: 'children'\r\n                }\r\n            }\r\n        },\r\n        created() {\r\n            this.getAdmin().then(res => {\r\n                console.log(res)\r\n                this.form = res\r\n            })\r\n            //获取所有分类数据\r\n            this.handleChange()\r\n        },\r\n        methods:{\r\n            handleChange(){//级联选择器绑定的方法\r\n                request.get('/admin/category/list/tree')\r\n                    .then(res => {\r\n                        //将获取到的数据赋值给values\r\n                        this.options = this.getTreeData(res.data)\r\n                    })\r\n            },\r\n            // 递归方法\r\n            getTreeData(data){\r\n                // 循环遍历json数据\r\n                for(var i=0;i<data.length;i++){\r\n                    if(data[i].children.length<1){\r\n                        // children若为空数组，则将children设为undefined\r\n                        data[i].children=undefined;\r\n                    }else {\r\n                        // children若不为空数组，则继续 递归调用 本方法\r\n                        this.getTreeData(data[i].children);\r\n                    }\r\n                }\r\n                return data;\r\n            },\r\n            async getAdmin() {\r\n                return (await this.request.get(\"/admin/\" + this.admin.adminName)).data\r\n            },\r\n            save(){\r\n\r\n            },\r\n            reset(){\r\n                this.$router\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}