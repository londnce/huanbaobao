{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport request from \"../utils/request\";\nexport default {\n  name: \"AddProduct\",\n  data() {\n    return {\n      headersObj: {\n        Authorization: window.sessionStorage.getItem('token')\n      },\n      ruleForm: {\n        title: '',\n        image: [],\n        price: '',\n        stock: '',\n        categoryleveloneId: '',\n        categoryleveltwoId: '',\n        categorylevelthreeId: ''\n      },\n      rules: {\n        title: [{\n          required: true,\n          message: '商品名称不能为空',\n          trigger: 'change'\n        }],\n        image: [{\n          required: true,\n          message: '商品照片不能为空',\n          trigger: 'change'\n        }, {\n          min: 3,\n          max: 5,\n          message: '长度在 3 到 5 个字符',\n          trigger: 'blur'\n        }],\n        categoryleveloneId: [{\n          required: true,\n          message: '一级分类不能为空',\n          trigger: 'blur'\n        }],\n        categoryleveltwoId: [{\n          required: true,\n          message: '二级分类不能为空',\n          trigger: 'blur'\n        }],\n        categorylevelthreeId: [{\n          required: true,\n          message: '三级分类不能为空',\n          trigger: 'blur'\n        }]\n      },\n      options1: '',\n      options2: '',\n      options3: ''\n    };\n  },\n  created() {\n    let _this = this;\n    request.get('/admin/productCategory/init').then(function (resp) {\n      _this.options1 = resp.data;\n    });\n  },\n  methods: {\n    change1() {\n      let _this = this;\n      request.get('/admin/productCategory/children/2/' + this.ruleForm.categoryleveloneId).then(function (resp) {\n        _this.options2 = resp.data;\n        _this.ruleForm.categoryleveltwoId = '';\n        _this.options3 = '';\n        _this.ruleForm.categorylevelthreeId = '';\n      });\n    },\n    change2() {\n      let _this = this;\n      request.get('/admin/productCategory/children/3/' + this.ruleForm.categoryleveltwoId).then(function (resp) {\n        _this.options3 = resp.data;\n        _this.ruleForm.categorylevelthreeId = '';\n      });\n    },\n    submitForm(formName) {\n      let _this = this;\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          request.post('/admin/product/save', _this.ruleForm).then(function (resp) {\n            if (resp.data) {\n              _this.$alert('【' + _this.ruleForm.name + '】添加成功', '', {\n                confirmButtonText: '确定',\n                callback: action => {\n                  _this.$router.push('/');\n                }\n              });\n            }\n          });\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};","map":{"version":3,"mappings":";AA0EA;AAEA;EACAA;EACAC;IACA;MACAC;QACAC;MACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;QACAP,QACA;UAAAQ;UAAAC;UAAAC;QAAA,EACA;QACAT,QACA;UAAAO;UAAAC;UAAAC;QAAA,GACA;UAAAC;UAAAC;UAAAH;UAAAC;QAAA,EACA;QACAN,qBACA;UAAAI;UAAAC;UAAAC;QAAA,EACA;QACAL,qBACA;UAAAG;UAAAC;UAAAC;QAAA,EACA;QACAJ,uBACA;UAAAE;UAAAC;UAAAC;QAAA;MAEA;MACAG;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;MACAH;QACAC;QACAA;QACAA;QACAA;MACA;IACA;IACAG;MACA;MACAJ;QACAC;QACAA;MACA;IACA;IACAI;MACA;MACA;QACA;UACAL;YACA;cACAC;gBACAK;gBACAC;kBACAN;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IACAO;MACA;IACA;EACA;AACA","names":["name","data","headersObj","Authorization","ruleForm","title","image","price","stock","categoryleveloneId","categoryleveltwoId","categorylevelthreeId","rules","required","message","trigger","min","max","options1","options2","options3","created","request","_this","methods","change1","change2","submitForm","confirmButtonText","callback","resetForm"],"sourceRoot":"src/views","sources":["AddProduct.vue"],"sourcesContent":["<template>\r\n    <div style=\"margin-top: 60px;margin-left:80px;width: 600px\">\r\n        <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n            <el-form-item label=\"商品名称\" prop=\"title\">\r\n                <el-input v-model=\"ruleForm.title\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item\r\n                    label=\"商品价格\"\r\n                    prop=\"price\"\r\n                    :rules=\"[\r\n    { required: true, message: '价格不能为空'},\r\n    { type: 'number', message: '价格必须为数字值'}\r\n  ]\"\r\n            >\r\n                <el-input v-model.number=\"ruleForm.price\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item\r\n                    label=\"商品库存\"\r\n                    prop=\"num\"\r\n                    :rules=\"[\r\n    { required: true, message: '库存不能为空'},\r\n    { type: 'number', message: '库存必须为数字值'}\r\n  ]\"\r\n            >\r\n                <el-input v-model.number=\"ruleForm.stock\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品照片\" prop=\"image\">\r\n                <el-upload\r\n                        action=\"https://jsonplaceholder.typicode.com/posts/\"\r\n                        :on-preview=\"handlePreview\"\r\n                        :on-remove=\"handleRemove\"\r\n                        :file-list=\"fileList\"\r\n                        list-type=\"picture\" :headers=\"headersObj\">\r\n                    <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n                </el-upload>\r\n            </el-form-item>\r\n            <el-form-item label=\"一级分类\" prop=\"categoryleveloneId\">\r\n                <el-select style=\"width:500px;\" v-model=\"ruleForm.categoryleveloneId\" @change=\"change1\"\r\n                           placeholder=\"请选择\">\r\n                    <el-option\r\n                            v-for=\"item in options1\"\r\n                            :label=\"item.title\"\r\n                            :value=\"item.id\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"二级分类\" prop=\"categoryleveltwoId\">\r\n                <el-select style=\"width:500px;\" v-model=\"ruleForm.categoryleveltwoId\" @change=\"change2\"\r\n                           placeholder=\"请选择\">\r\n                    <el-option\r\n                            v-for=\"item in options2\"\r\n                            :label=\"item.title\"\r\n                            :value=\"item.id\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"三级分类\" prop=\"categorylevelthreeId\">\r\n                <el-select style=\"width:500px;\" v-model=\"ruleForm.categorylevelthreeId\" placeholder=\"请选择\">\r\n                    <el-option\r\n                            v-for=\"item in options3\"\r\n                            :label=\"item.title\"\r\n                            :value=\"item.id\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">立即创建</el-button>\r\n                <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import request from \"../utils/request\";\r\n\r\n    export default {\r\n        name: \"AddProduct\",\r\n        data() {\r\n            return {\r\n                headersObj:{\r\n                    Authorization : window.sessionStorage.getItem('token')\r\n                },\r\n                ruleForm: {\r\n                    title: '',\r\n                    image: [],\r\n                    price: '',\r\n                    stock: '',\r\n                    categoryleveloneId: '',\r\n                    categoryleveltwoId: '',\r\n                    categorylevelthreeId: ''\r\n                },\r\n                rules: {\r\n                    title: [\r\n                        {required: true, message: '商品名称不能为空', trigger: 'change'}\r\n                    ],\r\n                    image: [\r\n                        {required: true, message: '商品照片不能为空', trigger: 'change'},\r\n                        {min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur'}\r\n                    ],\r\n                    categoryleveloneId: [\r\n                        {required: true, message: '一级分类不能为空', trigger: 'blur'}\r\n                    ],\r\n                    categoryleveltwoId: [\r\n                        {required: true, message: '二级分类不能为空', trigger: 'blur'}\r\n                    ],\r\n                    categorylevelthreeId: [\r\n                        {required: true, message: '三级分类不能为空', trigger: 'blur'}\r\n                    ]\r\n                },\r\n                options1: '',\r\n                options2: '',\r\n                options3: ''\r\n            };\r\n        },\r\n        created() {\r\n            let _this = this\r\n            request.get('/admin/productCategory/init').then(function (resp) {\r\n                _this.options1 = resp.data\r\n            })\r\n        },\r\n        methods: {\r\n            change1() {\r\n                let _this = this\r\n                request.get('/admin/productCategory/children/2/' + this.ruleForm.categoryleveloneId).then(function (resp) {\r\n                    _this.options2 = resp.data\r\n                    _this.ruleForm.categoryleveltwoId = ''\r\n                    _this.options3 = ''\r\n                    _this.ruleForm.categorylevelthreeId = ''\r\n                })\r\n            },\r\n            change2() {\r\n                let _this = this\r\n                request.get('/admin/productCategory/children/3/' + this.ruleForm.categoryleveltwoId).then(function (resp) {\r\n                    _this.options3 = resp.data\r\n                    _this.ruleForm.categorylevelthreeId = ''\r\n                })\r\n            },\r\n            submitForm(formName) {\r\n                let _this = this\r\n                this.$refs[formName].validate((valid) => {\r\n                    if (valid) {\r\n                        request.post('/admin/product/save', _this.ruleForm).then(function (resp) {\r\n                            if (resp.data) {\r\n                                _this.$alert('【' + _this.ruleForm.name + '】添加成功', '', {\r\n                                    confirmButtonText: '确定',\r\n                                    callback: action => {\r\n                                        _this.$router.push('/')\r\n                                    }\r\n                                });\r\n                            }\r\n                        })\r\n                    }\r\n                });\r\n            },\r\n            resetForm(formName) {\r\n                this.$refs[formName].resetFields();\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}